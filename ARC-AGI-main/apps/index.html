<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
        />
        <title>ARC Testing Interface</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="js/common.js"></script>
        <script src="js/testing_interface.js"></script>

        <link rel="stylesheet" type="text/css" href="css/common.css" />
        <link
            rel="stylesheet"
            type="text/css"
            href="css/testing_interface.css"
        />

        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" type="text/css" href="css/responsive.css" />
    </head>
    <body>
        <!-- ‚îÄ‚îÄ Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="modal_bg">
            <div id="modal">
                <div class="modal_icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <rect
                            x="4"
                            y="4"
                            width="16"
                            height="16"
                            rx="3"
                            fill="#1e93ff"
                            opacity="0.9"
                        />
                        <rect
                            x="28"
                            y="4"
                            width="16"
                            height="16"
                            rx="3"
                            fill="#f93c31"
                            opacity="0.9"
                        />
                        <rect
                            x="4"
                            y="28"
                            width="16"
                            height="16"
                            rx="3"
                            fill="#4fdc4a"
                            opacity="0.9"
                        />
                        <rect
                            x="28"
                            y="28"
                            width="16"
                            height="16"
                            rx="3"
                            fill="#ffdc00"
                            opacity="0.9"
                        />
                    </svg>
                </div>
                <div class="modal_title">ARC Testing Interface</div>
                <div class="modal_subtitle">
                    Load a task JSON file to begin solving puzzles.
                </div>
                <div class="modal_dropzone" id="modal_dropzone">
                    <div class="modal_dropzone_icon">
                        <svg
                            width="36"
                            height="36"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="#555"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path
                                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                            />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                    </div>
                    <div class="modal_dropzone_text">
                        Drag &amp; drop a <strong>.json</strong> task file here
                    </div>
                    <div class="modal_dropzone_divider">
                        <span>or</span>
                    </div>
                    <label class="modal_browse_btn" for="modal_file_input">
                        Browse files
                    </label>
                    <input
                        type="file"
                        accept=".json"
                        class="load_task"
                        id="modal_file_input"
                        style="display: none"
                    />
                </div>
                <div class="modal_footer">Supports ARC-AGI task format</div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ Top Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="top_bar">
            <div id="top_bar_left">
                <span id="task_name" class="puzzle_id">Puzzle ID: ‚Äî</span>
            </div>
            <div id="top_bar_right">
                <label class="btn btn-outline" id="top_load_btn">
                    Load task
                    <input
                        type="file"
                        accept=".json"
                        class="load_task"
                        id="top_file_input"
                        style="display: none"
                    />
                </label>
                <!--<button
                    onclick="randomTask()"
                    class="btn btn-primary"
                    id="top_random_btn"
                >
                    Random task
                </button>-->
            </div>
        </div>

        <!-- ‚îÄ‚îÄ Main Workspace ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="workspace">
            <!-- ‚îÄ‚îÄ LEFT: Examples Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <div id="examples_panel">
                <div class="section_header">EXAMPLES</div>
                <div id="task_preview"></div>
            </div>

            <!-- ‚îÄ‚îÄ RIGHT: Test Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <div id="test_panel">
                <div class="section_header">TEST</div>

                <!-- Test grids row -->
                <div id="test_grids_container">
                    <div id="test_input_wrapper">
                        <div class="grid_label">
                            Input
                            <span class="grid_dims" id="test_input_dims"></span>
                        </div>
                        <div
                            id="evaluation_input"
                            class="selectable_grid grid_display"
                        ></div>
                    </div>

                    <div class="arrow_separator" id="test_arrow">‚Üí</div>

                    <div id="test_output_wrapper">
                        <div class="grid_label">
                            Output
                            <span class="grid_dims" id="test_output_dims"
                                >(3x3)</span
                            >
                        </div>
                        <div id="output_grid">
                            <div
                                class="edition_grid selectable_grid grid_display"
                            >
                                <div class="row">
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="0"
                                        y="0"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="0"
                                        y="1"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="0"
                                        y="2"
                                    ></div>
                                </div>
                                <div class="row">
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="1"
                                        y="0"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="1"
                                        y="1"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="1"
                                        y="2"
                                    ></div>
                                </div>
                                <div class="row">
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="2"
                                        y="0"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="2"
                                        y="1"
                                    ></div>
                                    <div
                                        class="cell"
                                        symbol="0"
                                        x="2"
                                        y="2"
                                    ></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test input navigation -->
                <div id="test_navigation">
                    <button onclick="prevTestInput()" class="btn btn-dark">
                        Previous
                    </button>
                    <span class="test_counter"
                        >Test
                        <span id="current_test_input_id_display">1</span> of
                        <span id="total_test_input_count_display">1</span></span
                    >
                    <button onclick="nextTestInput()" class="btn btn-dark">
                        Next
                    </button>
                </div>

                <!-- Controls Section -->
                <div id="controls_panel">
                    <!-- Step 1: Configure grid -->
                    <div class="control_section">
                        <div class="step_label">
                            1. Configure your output grid:
                        </div>
                        <div class="control_row">
                            <div class="control_group_left">
                                <input
                                    type="text"
                                    id="output_grid_size"
                                    class="grid_size_field"
                                    name="size"
                                    value="3x3"
                                />
                                <button
                                    onclick="resizeOutputGrid()"
                                    id="resize_btn"
                                    class="btn btn-dark"
                                >
                                    Resize
                                </button>
                            </div>
                            <div class="control_group_right">
                                <button
                                    onclick="copyFromInput()"
                                    class="btn btn-dark"
                                >
                                    <code>Copy from input</code>
                                </button>
                                <button
                                    onclick="resetOutputGrid()"
                                    class="btn btn-dark"
                                >
                                    Clear
                                </button>
                                <button
                                    onclick="resetOutputGrid()"
                                    class="btn btn-dark"
                                >
                                    Reset
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Edit cells -->
                    <div class="control_section">
                        <div class="step_label">
                            2. Edit your output grid cells:
                        </div>
                        <div id="toolbar">
                            <label
                                class="tool_btn active_tool"
                                id="tool_edit_label"
                            >
                                <input
                                    type="radio"
                                    id="tool_edit"
                                    name="tool_switching"
                                    value="edit"
                                    checked
                                />
                                <span class="tool_icon">‚úèÔ∏è</span> Edit
                            </label>
                            <label class="tool_btn" id="tool_select_label">
                                <input
                                    type="radio"
                                    id="tool_select"
                                    name="tool_switching"
                                    value="select"
                                />
                                <span class="tool_icon">‚òê</span> Select
                            </label>
                            <label class="tool_btn" id="tool_floodfill_label">
                                <input
                                    type="radio"
                                    id="tool_floodfill"
                                    name="tool_switching"
                                    value="floodfill"
                                />
                                <span class="tool_icon">ü™£</span> Fill
                            </label>
                        </div>

                        <div id="symbol_picker">
                            <div
                                class="symbol_preview symbol_0 selected-symbol-preview"
                                symbol="0"
                            ></div>
                            <div
                                class="symbol_preview symbol_1"
                                symbol="1"
                            ></div>
                            <div
                                class="symbol_preview symbol_2"
                                symbol="2"
                            ></div>
                            <div
                                class="symbol_preview symbol_3"
                                symbol="3"
                            ></div>
                            <div
                                class="symbol_preview symbol_4"
                                symbol="4"
                            ></div>
                            <div
                                class="symbol_preview symbol_5"
                                symbol="5"
                            ></div>
                            <div
                                class="symbol_preview symbol_6"
                                symbol="6"
                            ></div>
                            <div
                                class="symbol_preview symbol_7"
                                symbol="7"
                            ></div>
                            <div
                                class="symbol_preview symbol_8"
                                symbol="8"
                            ></div>
                            <div
                                class="symbol_preview symbol_9"
                                symbol="9"
                            ></div>
                        </div>
                    </div>

                    <!-- Step 3: Submit -->
                    <div class="control_section">
                        <div class="step_label">
                            3. See if your output is correct:
                        </div>
                        <div class="submit_row">
                            <button
                                onclick="submitSolution()"
                                id="submit_solution_btn"
                                class="btn btn-submit"
                            >
                                <code>Submit solution</code>
                            </button>
                            <span id="error_display"></span>
                            <span id="info_display"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hidden file input for loading tasks -->
        <input
            type="file"
            id="load_task_file_input"
            class="load_task"
            style="display: none"
        />

        <label for="show_symbol_numbers" style="display: none">
            <input
                type="checkbox"
                id="show_symbol_numbers"
                name="show_symbol_numbers"
                onchange="changeSymbolVisibility()"
            />
        </label>
    </body>
</html>
